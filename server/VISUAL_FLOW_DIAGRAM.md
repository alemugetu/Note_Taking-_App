# ğŸ¨ Visual Flow Diagrams

## 1ï¸âƒ£ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  React Frontend (Port 5173)                            â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ App.tsx                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Login.tsx                                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Register.tsx                                      â”‚    â”‚
â”‚  â”‚  â””â”€â”€ NoteList.tsx                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â”‚ HTTP Request                        â”‚
â”‚                            â”‚ (JSON Data)                         â”‚
â”‚                            â–¼                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXPRESS SERVER (Port 5000)                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  server.js (Entry Point)                               â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ CORS Middleware                                   â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ JSON Parser                                       â”‚    â”‚
â”‚  â”‚  â””â”€â”€ Route Registration                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  routes/authRoutes.js                                  â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ POST /api/auth/register â†’ register()             â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ POST /api/auth/login â†’ login()                   â”‚    â”‚
â”‚  â”‚  â””â”€â”€ GET /api/auth/profile â†’ protect â†’ getProfile()   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  middleware/auth.js (Optional)                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Extract JWT token                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Verify token                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Get user from database                            â”‚    â”‚
â”‚  â”‚  â””â”€â”€ Attach user to req.user                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  controllers/authController.js                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Validate input                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Business logic                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Call Model methods                                â”‚    â”‚
â”‚  â”‚  â””â”€â”€ Send response                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  models/User.js                                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Schema definition                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Validation rules                                  â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Pre-save hooks (password hashing)                 â”‚    â”‚
â”‚  â”‚  â””â”€â”€ Methods (comparePassword, getPublicProfile)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â”‚ Mongoose Query                      â”‚
â”‚                            â–¼                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MongoDB Atlas (Cloud)                         â”‚
â”‚                                                                  â”‚
â”‚  Database: notesdb                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Collection: users                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ Document 1:                                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ {                                            â”‚     â”‚    â”‚
â”‚  â”‚  â”‚   _id: ObjectId("..."),                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚   email: "user@example.com",                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚   password: "$2a$10$hashed...",              â”‚     â”‚    â”‚
â”‚  â”‚  â”‚   profile: { name: "John" },                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚   createdAt: ISODate("...")                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ }                                            â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ Registration Flow (Detailed)

```
USER                FRONTEND              BACKEND                DATABASE
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚  Fills form         â”‚                     â”‚                      â”‚
 â”‚  Clicks Register    â”‚                     â”‚                      â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚  POST /api/auth/    â”‚                      â”‚
 â”‚                     â”‚  register           â”‚                      â”‚
 â”‚                     â”‚  {email, password}  â”‚                      â”‚
 â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Check if user       â”‚
 â”‚                     â”‚                     â”‚  exists              â”‚
 â”‚                     â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  User not found      â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Hash password       â”‚
 â”‚                     â”‚                     â”‚  (bcrypt)            â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Create user         â”‚
 â”‚                     â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  User saved          â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Generate JWT        â”‚
 â”‚                     â”‚                     â”‚  token               â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚  Response:          â”‚                      â”‚
 â”‚                     â”‚  {success, token,   â”‚                      â”‚
 â”‚                     â”‚   user}             â”‚                      â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚  Shows success      â”‚  Store token        â”‚                      â”‚
 â”‚  Redirects to app   â”‚  in localStorage    â”‚                      â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
```

---

## 3ï¸âƒ£ Login Flow (Detailed)

```
USER                FRONTEND              BACKEND                DATABASE
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚  Enters email       â”‚                     â”‚                      â”‚
 â”‚  Enters password    â”‚                     â”‚                      â”‚
 â”‚  Clicks Login       â”‚                     â”‚                      â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚  POST /api/auth/    â”‚                      â”‚
 â”‚                     â”‚  login              â”‚                      â”‚
 â”‚                     â”‚  {email, password}  â”‚                      â”‚
 â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Find user by        â”‚
 â”‚                     â”‚                     â”‚  email               â”‚
 â”‚                     â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  User found with     â”‚
 â”‚                     â”‚                     â”‚  hashed password     â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Compare passwords   â”‚
 â”‚                     â”‚                     â”‚  bcrypt.compare()    â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  âœ“ Match!            â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Generate JWT        â”‚
 â”‚                     â”‚                     â”‚  token               â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚  Response:          â”‚                      â”‚
 â”‚                     â”‚  {success, token,   â”‚                      â”‚
 â”‚                     â”‚   user}             â”‚                      â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚  Logged in!         â”‚  Store token        â”‚                      â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
```

---

## 4ï¸âƒ£ Protected Route Flow (Get Profile)

```
USER                FRONTEND              BACKEND                DATABASE
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚  Clicks Profile     â”‚                     â”‚                      â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚  GET /api/auth/     â”‚                      â”‚
 â”‚                     â”‚  profile            â”‚                      â”‚
 â”‚                     â”‚  Header:            â”‚                      â”‚
 â”‚                     â”‚  Authorization:     â”‚                      â”‚
 â”‚                     â”‚  Bearer <token>     â”‚                      â”‚
 â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                  â”Œâ”€â”€â”´â”€â”€â”                   â”‚
 â”‚                     â”‚                  â”‚ MW  â”‚ Middleware        â”‚
 â”‚                     â”‚                  â”‚     â”‚ Extract token     â”‚
 â”‚                     â”‚                  â”‚     â”‚ Verify token      â”‚
 â”‚                     â”‚                  â”‚     â”‚ jwt.verify()      â”‚
 â”‚                     â”‚                  â”‚     â”‚                   â”‚
 â”‚                     â”‚                  â”‚     â”‚ Get user ID       â”‚
 â”‚                     â”‚                  â”‚     â”‚ from token        â”‚
 â”‚                     â”‚                  â””â”€â”€â”¬â”€â”€â”˜                   â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  Find user by ID     â”‚
 â”‚                     â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚  User data           â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                  â”Œâ”€â”€â”´â”€â”€â”                   â”‚
 â”‚                     â”‚                  â”‚ MW  â”‚ Attach user       â”‚
 â”‚                     â”‚                  â”‚     â”‚ to req.user       â”‚
 â”‚                     â”‚                  â”‚     â”‚ Call next()       â”‚
 â”‚                     â”‚                  â””â”€â”€â”¬â”€â”€â”˜                   â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚                  â”Œâ”€â”€â”´â”€â”€â”                   â”‚
 â”‚                     â”‚                  â”‚CTRL â”‚ Controller        â”‚
 â”‚                     â”‚                  â”‚     â”‚ Access req.user   â”‚
 â”‚                     â”‚                  â”‚     â”‚ Format response   â”‚
 â”‚                     â”‚                  â””â”€â”€â”¬â”€â”€â”˜                   â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚                     â”‚  Response:          â”‚                      â”‚
 â”‚                     â”‚  {success, user}    â”‚                      â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
 â”‚  Display profile    â”‚                     â”‚                      â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                      â”‚
 â”‚                     â”‚                     â”‚                      â”‚
```

---

## 5ï¸âƒ£ File Interaction Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUEST JOURNEY                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. server.js
   â”‚
   â”œâ”€> Receives HTTP request
   â”œâ”€> Applies CORS middleware
   â”œâ”€> Parses JSON body
   â””â”€> Routes to: /api/auth/*
       â”‚
       â”‚
2. routes/authRoutes.js
   â”‚
   â”œâ”€> Matches URL pattern
   â”œâ”€> Checks HTTP method
   â””â”€> Calls: middleware (if protected) â†’ controller
       â”‚
       â”‚
3. middleware/auth.js (if protected route)
   â”‚
   â”œâ”€> Extracts token from header
   â”œâ”€> Verifies token with JWT_SECRET
   â”œâ”€> Decodes token to get user ID
   â”œâ”€> Queries database for user
   â”œâ”€> Attaches user to req.user
   â””â”€> Calls next() to continue
       â”‚
       â”‚
4. controllers/authController.js
   â”‚
   â”œâ”€> Receives request (req, res, next)
   â”œâ”€> Validates input data
   â”œâ”€> Implements business logic
   â”œâ”€> Calls Model methods
   â””â”€> Sends response
       â”‚
       â”‚
5. models/User.js
   â”‚
   â”œâ”€> Defines schema structure
   â”œâ”€> Validates data against schema
   â”œâ”€> Runs pre-save hooks (hash password)
   â”œâ”€> Executes database query
   â””â”€> Returns result
       â”‚
       â”‚
6. MongoDB Atlas
   â”‚
   â”œâ”€> Receives query
   â”œâ”€> Executes operation (find, create, update)
   â”œâ”€> Returns document(s)
   â””â”€> Sends back to Model
       â”‚
       â”‚
   [Response travels back up the chain]
       â”‚
       â–¼
   User sees result in browser/Postman
```

---

## 6ï¸âƒ£ Data Transformation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FRONTEND INPUT                                              â”‚
â”‚  {                                                           â”‚
â”‚    email: "john@example.com",                                â”‚
â”‚    password: "mypassword",                                   â”‚
â”‚    name: "John Doe"                                          â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP POST
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTROLLER RECEIVES                                         â”‚
â”‚  req.body = {                                                â”‚
â”‚    email: "john@example.com",                                â”‚
â”‚    password: "mypassword",                                   â”‚
â”‚    name: "John Doe"                                          â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Validation
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MODEL PRE-SAVE HOOK                                         â”‚
â”‚  {                                                           â”‚
â”‚    email: "john@example.com",                                â”‚
â”‚    password: "$2a$10$hashed_password_here",  â† HASHED!       â”‚
â”‚    profile: {                                                â”‚
â”‚      name: "John Doe",                                       â”‚
â”‚      avatar: ""                                              â”‚
â”‚    },                                                        â”‚
â”‚    preferences: {                                            â”‚
â”‚      theme: "light",                                         â”‚
â”‚      defaultColor: "#007bff"                                 â”‚
â”‚    }                                                         â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Save to DB
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONGODB STORES                                              â”‚
â”‚  {                                                           â”‚
â”‚    _id: ObjectId("65f1234567890abcdef12345"),  â† ADDED      â”‚
â”‚    email: "john@example.com",                                â”‚
â”‚    password: "$2a$10$hashed_password_here",                  â”‚
â”‚    profile: { name: "John Doe", avatar: "" },                â”‚
â”‚    preferences: { theme: "light", defaultColor: "#007bff" }, â”‚
â”‚    createdAt: ISODate("2024-02-05T..."),       â† ADDED       â”‚
â”‚    updatedAt: ISODate("2024-02-05T..."),       â† ADDED       â”‚
â”‚    __v: 0                                      â† ADDED       â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Generate JWT
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESPONSE TO FRONTEND                                        â”‚
â”‚  {                                                           â”‚
â”‚    success: true,                                            â”‚
â”‚    token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",         â”‚
â”‚    user: {                                                   â”‚
â”‚      id: "65f1234567890abcdef12345",                         â”‚
â”‚      email: "john@example.com",                              â”‚
â”‚      profile: { name: "John Doe", avatar: "" },              â”‚
â”‚      preferences: { theme: "light", defaultColor: "#007bff" }â”‚
â”‚    }                                                         â”‚
â”‚  }                                                           â”‚
â”‚  â† NOTE: Password NOT included!                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Points

1. **server.js** = Traffic controller (receives all requests)
2. **routes/** = GPS (directs to correct destination)
3. **middleware/** = Security checkpoint (checks credentials)
4. **controllers/** = Manager (makes decisions)
5. **models/** = Database interface (talks to MongoDB)
6. **MongoDB** = Storage (keeps the data)

**Data flows DOWN, Response flows UP!**
